
void setup()                                                                                // ARDUINO Setup.
void loop()                                                                                 // ARDUINO Loop.
void CheckDevices(void)                                                                     // COMMON Check connected input devices.
void EverySecondCheck(void)                                                                 // COMMON Update routine.
void Every100mSecCheck(void)                                                                // COMMON Update routine.
void EveryMinuteUpdate(void)                                                                // COMMON Update routine done every minute.
void EveryHourUpdate(void)                                                                  // COMMON Update routine done every hour.
void EveryDayUpdate(void)                                                                   // COMMON Update routine done every day.
void UpdateStatusLEDs(int Toggle)                                                           // COMMON Update routine for the status LEDs.
void SetStatusLED(int Red, int Green, int Blue)                                             // COMMON Control the RGB LEDs on the Nano ESP32.
void SetNanoLED13(int intensity)                                                            // COMMON Control orange LED D13 on the Arduino.
void SetPCBLED09(int intensity)                                                             // COMMON Control the RGB LED on the PCB.
void SetPCBLED10(int intensity)                                                             // COMMON Control the RGB LED on the PCB.
void SerialCheck(void)                                                                      // COMMON check for serial input.
void Reset(void)                                                                            // COMMON Reset to default settings. BLE On, WIFI NTP Off.
void ResetCredentials(void)                                                                 // COMMON Reset to empty credential settings WIFI, NTP, BLE ON.
void Tekstprint(char const *tekst)                                                          // COMMON common print routines.
void Tekstprintln(char const *tekst)                                                        // COMMON common print routines.
void TekstSprint(char const *tekst)                                                         // COMMON common print routines.
void TekstSprintln(char const *tekst)                                                       // COMMON common print routines.
void Tekstprintf(const char* fmt, ...)                                                      // COMMON Formatted Tekst print.
void Tekstprintlnf(const char* fmt, ...)                                                    // COMMON Formatted Tekstprintln.
void WTekstappend(char const *tekst, char const *prefix, char const *suffix, bool newline)  // COMMON Print web menu page and BLE menu.
void WTekstprintln(char const *tekst)                                                       // COMMON Print web menu page and BLE menu.
void WTekstprintln(char const *tekst, char const *prefix, char const *suffix)               // COMMON Print web menu page and BLE menu.
void WTekstprint(char const *tekst)                                                         // COMMON Print web menu page and BLE menu.
void WTekstprint(char const *tekst, char const *prefix, char const *suffix)                 // COMMON Print web menu page and BLE menu.
int SConstrainInt(String s,byte first,byte last,int low,int up)                             // COMMON Constrain a string with integers.
int SConstrainInt(String s,byte first,          int low,int up)                             // COMMON Constrain a string with integers.
void InitStorage(void)                                                                      // COMMON Init and check contents of EEPROM.
void StoreStructInFlashMemory(void)                                                         // COMMON Store mem.struct in FlashStorage or SD.
void StoreIRRemoteInFlashMemory(void)                                                       // COMMON Save IR remote settings.
void GetStructFromFlashMemory(void)                                                         // COMMON Get data from FlashStorage.
void GetIRRemoteFromFlashMemory(void)                                                       // COMMON Load IR remote settings from FlashStorage.
const char* SoftwareName(void)                                                              // COMMON Print Software naam without path.
void SWversion(void)                                                                        // COMMON Version info.
void SWversion(bool Small)                                                                  // COMMON Version info.
void PrintLine(byte Lengte)                                                                 // COMMON Print a _ line of n length.
void ReworkInputString(String InputString)                                                  // COMMON Input from Bluetooth, Serial or HTML page.
void PrintTimeInputMethod(byte Im)                                                          // COMMON Print time input method.
void PrintMem(void)                                                                         // COMMON Print permanent Mem memory.
void StoredStartHeaps()                                                                     // COMMON Print memory space.
void StoredStartHeaps(bool Store)                                                           // COMMON Print memory space.
void PrintHeaps(void)                                                                       // COMMON Print memory space.
int ReadLDR(void)                                                                           // COMMON LDR reading are between 0 and 255.
void Displaytime(void)                                                                      // CLOCK Say the time and load the LEDs.
void DimLeds(bool print)                                                                    // CLOCK Dim the leds measured by the LDR and print values.
void ColorLeds(char const *Tekst, int FirstLed, int LastLed, uint32_t RGBWColor)            // LED Set color for LEDs in strip and print tekst.
void ColorLed(int Lednr, uint32_t RGBWColor)                                                // LED Set color for LEDs in strip and print tekst.
void LedsOff(void)                                                                          // LED Clear display settings of the LEDs.
void Laatzien(int Delaymsec)                                                                // LED Turn On and the LEDs off after Delaymsec milliseconds.
void ShowLeds(void)                                                                         // LED Push data in LED strip to commit the changes.
void SetBrightnessLeds(byte Bright)                                                         // LED Set brighness of LEDs.
void Stripfill(uint32_t RGBWColor, int FirstLed, int NoofLEDs)                              // LED Set brighness of LEDs.
uint32_t StripGetPixelColor(int Lednr)                                                      // LED Set brighness of LEDs.
void LEDstartup(uint32_t LEDColour)                                                         // LED Synchronize the colour of the LEDstrip with the Status LED.
uint32_t HSVToRGB(double H, double S, double V)                                             // LED convert HSV to RGB  h is from 0-360, s,v values are 0-1.
uint32_t FuncCRGBW( uint32_t Red, uint32_t Green, uint32_t Blue, uint32_t White)            // LED function to make RGBW colour.
void ClearScreen(void)                                                                      // DISPLAY Clear the display.
void StartLeds(void)                                                                        // DISPLAY Initialyse the LEDstrip for WS2812 or SK6812 LEDs.
void WriteLightReducer(int amount)                                                          // CLOCK In- or decrease light intensity value i.e. Slope.
void InitTimeSystem(void)                                                                   // TIME Initialize time system (DS3231 + NTP + internal RTC).
void SetSystemTimeToCompileTime(void)                                                       // TIME Set system time to compile time using basic functions.
time_t GetTijd(bool printit)                                                                // TIME Get current time from best available source.
DateTime GetLocalDateTime()                                                                 // NTP Return local time as RTClib DateTime.
bool GetNTPtime(bool printit)                                                               // NTP print the NTP time for the timezone set.
const char* PrintNTPtime(void)                                                              // NTP Print current local (NTP) time.
const char* PrintUTCtime(void)                                                              // NTP print the NTP UTC time.
bool IsDS3231I2Cconnected(void)                                                             // DS3231 check for I2C connection.
float GetDS3231Temp(void)                                                                   // DS3231 temperature.
void SetDS3231Time(void)                                                                    // DS3231 RTC ESP32 -> DS3231.
void GetDS3231Time(bool printit)                                                            // DS3231 reads time in module DS3231.
const char* PrintDS3231Time(void)                                                           // DS3231 Print DS3231 time.
const char* PrintRTCTime()                                                                  // RTC prints the ESP32 internal RTC time to sptext and web page.
const char* PrintHMSTime()                                                                  // RTC Print time as hh:mm:ss.
void PrintTimeHMS()                                                                         // RTC Fill sptext with time as HMS hh:mm:ss.
void PrintTimeHMS(byte format)                                                              // RTC Fill sptext with time as HMS hh:mm:ss.
void SetRTCTime(void)                                                                       // RTC Set time in ESP32 using global timeinfo struct.
void SetSystemTime(time_t t)                                                                // RTC Set RTC time using Unix timestamp.
void PrintAllClockTimes(void)                                                               // CLOCK Print all the times available.
void SendMessageBLE(std::string Message)                                                    // BLE SendMessage by BLE Slow in packets of 20 chars.
class MyServerCallbacks: public NimBLEServerCallbacks                                       // BLE Start BLE Classes NimBLE Version 2.x.x.
class MyCallbacks: public NimBLECharacteristicCallbacks                                     // BLE Start BLE Classes NimBLE Version 2.x.x.
void StartBLEService(void)                                                                  // BLE Start BLE Service.
void CheckBLE(void)                                                                         // BLE Start BLE Service.
void WiFiEvent(WiFiEvent_t event)                                                           // WIFI WIFIEvents.
void ScanWIFI(void)                                                                         // WIFI Scan for WIFI stations and print a list of networks found.
void ConnectWIFI(void)                                                                      // WIFI Check for WIFI router SSID and password.
void CheckRestoreWIFIconnectivity(void)                                                     // WIFI Check if WIFI is still connected and if not restore it.
bool StartWIFI_NTP(void)                                                                    // WIFI Start WIFI connection and NTP service.
void NTPnotify(struct timeval* tv)                                                          // NTP functions.
void CheckandPrintNTPsynced(void)                                                           // NTP functions.
void setTimezone()                                                                          // NTP functions.
void initSNTP()                                                                             // NTP functions.
bool wait4SNTP()                                                                            // NTP Get a NTP time and wait max 2.5 sec.
void WebPage(void)                                                                          // WIFI WEBPAGE.
void notFound(AsyncWebServerRequest *request)                                               // WIFI WEBPAGE.
void StartAPMode(void)                                                                      // WIFI WEBPAGE Login credentials Access Point page with 192.168.4.1.
void wpsInitConfig()                                                                        // WIFI WPS functions.
void wpsStart()                                                                             // WIFI WPS functions.
void wpsStop()                                                                              // WIFI WPS functions.
String wpspin2string(uint8_t a[])                                                           // WIFI WPS functions.
void OnewireKeypad3x4Check(void)                                                            // KEYPAD check for Onewire Keypad input.
void OnewireKeypad3x1Check(void)                                                            // KEYPAD check for Onewire Keypad input with 5V and 1.1, 4.7, 4.7, 4.7 kOhm resistors.
void Keypad3x1Check(void)                                                                   // KEYPAD 3x1 Init.
void RotaryEncoderCheck(void)                                                               // KY-040 ROTARY check if the rotary is moving.
void ProcessKeyPressTurn(int encoderPos)                                                    // CLOCK KY-040 Rotary or Membrane 3x1 processing input.
void Start_IRreceiver(void)                                                                 // IR-RECEIVER Start alarge or tiny IR-RECEIVER.
void Init_IRreceiver(String* ButtonTempNames, byte numButtons)                              // IR-RECEIVER Init.
uint16_t IrReceiverDecode(void)                                                             // IR-RECEIVER Decode received signal,.
void ProcessLearningMode(decode_type_t protocol, uint16_t command, uint16_t address)        // IR-RECEIVER Decode received signal,.
void ProcessRecognitionMode(decode_type_t protocol, uint16_t command, uint16_t address)     // IR-RECEIVER Decode received signal,.
void StartIRLearning(void)                                                                  // IR-RECEIVER Initializes learning mode.
void PrintAllMappings(void)                                                                 // IR-RECEIVER Shows learned buttons.
void ResetAllIRremoteSettings(void)                                                         // IR-RECEIVER Reset all settings.
int RecognizeButton(decode_type_t protocol, uint16_t command, uint16_t address)             // IR-RECEIVER Identifies button pressed.
void ReworkIRremoteValue(int ButtonNamesNr)                                                 // IR-RECEIVER ReworkRemoteValue.
void AdjustTime(int DeltaHours, int DeltaMinutes, int DeltaSeconds)                         // IR-RECEIVER Adjust current time by hours/minutes/seconds.
void ToggleIRpower(void)                                                                    // IR-RECEIVER Turn On or off Remote control.
void InitLogBuffer()                                                                        // LOGBUFFER Initialize circular logging buffer.
void AddLog(const char* msg)                                                                // LOGBUFFER Add a log line (raw C-string). Always ends with '\n'.
void HandleTekstPrint(AsyncWebServerRequest *request)                                       // LOGBUFFER Stream the last 500 lines circular log buffer directly to the client.
void HandleTekstDownload(AsyncWebServerRequest *request)                                    // LOGBUFFER Stream all the circular log buffer directly to the client.
bool rtcActive[MAX_RTC] =                                                                   // RTC8.
int activeRTCCount     = 0;                                                                 // RTC8.
void SetupRTCs(void)                                                                        // RTC8 Initialyse all connected RTC's.
void PrintRTCtimes(void)                                                                    // RTC8 Print RTC times.
void PrintDifRTCtimes(void)                                                                 // RTC8 Print RTC differences from NTP.
void UpdateRTCTimeLEDs(void)                                                                // RTC8 Update the time difference in the LEDs.
void CalcDifRTCtimes(void)                                                                  // RTC8 Calculate difference in sec from NTP.
void selectTCAChannel(uint8_t channel)                                                      // RTC8 Function to select TCA9548A channel.
void SetTimeForRTC(int rtcIndex, DateTime newTime)                                          // RTC8 set Time For RTC.
void PrintTimeForRTC(int rtcIndex)                                                          // RTC8 Print Time For RTC.
float GetTemperatureForRTC(int rtcIndex)                                                    // RTC8 get Temperature For RTC.
void SynchronizeAllRTCs()   // Zoek eerste actieve RTC als referentie                       // RTC8 Synchronize all RTC's with current time.
void SetCurrentTime()                                                                       // RTC8 Set time by hand in serial monitor.
